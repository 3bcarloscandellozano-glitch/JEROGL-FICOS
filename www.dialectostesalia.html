<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Primary Meta Tags -->
    <title>Dialectos de Tesalia Antigua | Mapa Interactivo de las TÃ©tradas (s. V-IV a.C.)</title>
    <meta name="title" content="Dialectos de Tesalia Antigua | Mapa Interactivo de las TÃ©tradas">
    <meta name="description" content="Mapa interactivo de las cuatro tÃ©tradas de Tesalia antigua y Perrebia con caracterÃ­sticas dialectales del griego tesalio (PelasgiÃ³tide, TesaliÃ³tide, HistiÃ³tide, FtiÃ³tide). Siglos V-IV a.C.">
    <meta name="keywords" content="Tesalia, dialectos griegos, griego antiguo, PelasgiÃ³tide, TesaliÃ³tide, HistiÃ³tide, FtiÃ³tide, Perrebia, lingÃ¼Ã­stica histÃ³rica, epigrafÃ­a griega">
    <meta name="author" content="DialectologÃ­a Griega Antigua">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Dialectos de Tesalia Antigua | Mapa Interactivo">
    <meta property="og:description" content="Explora las caracterÃ­sticas dialectales de las cuatro tÃ©tradas tesalias y Perrebia con inscripciones epigrÃ¡ficas (s. V-IV a.C.)">
    <meta property="og:site_name" content="Atlas DialectolÃ³gico de Tesalia">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Dialectos de Tesalia Antigua | Mapa Interactivo">
    <meta property="twitter:description" content="Mapa interactivo de las caracterÃ­sticas dialectales del griego tesalio antiguo">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ğŸ“œ</text></svg>">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: #f5f5dc;
            overflow: hidden;
        }
        
        #map {
            height: 100vh;
            width: 100%;
        }
        
        .legend {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            font-size: 14px;
            border: 2px solid #8b7355;
        }
        
        .legend h4 {
            margin: 0 0 15px 0;
            font-size: 18px;
            color: #5d4037;
            text-align: center;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            padding: 5px;
            border-radius: 5px;
            transition: background 0.3s;
            cursor: pointer;
        }
        
        .legend-item:hover {
            background: rgba(139, 115, 85, 0.1);
        }
        
        .legend-color {
            width: 24px;
            height: 24px;
            margin-right: 10px;
            border: 2px solid #333;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .legend-text {
            font-weight: 600;
            color: #4a4a4a;
        }
        
        .city-popup {
            font-family: 'Georgia', serif;
        }
        
        .city-popup h3 {
            margin: 0 0 8px 0;
            color: #5d4037;
            font-size: 16px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
        }
        
        .city-popup p {
            margin: 5px 0;
            font-size: 13px;
            color: #555;
        }
        
        .city-popup strong {
            color: #8b7355;
        }
        
        .region-popup {
            font-family: 'Georgia', serif;
            max-width: 450px;
        }
        
        .region-popup h3 {
            margin: 0 0 10px 0;
            color: #5d4037;
            font-size: 18px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
        }
        
        .region-popup h4 {
            margin: 10px 0 5px 0;
            color: #8b7355;
            font-size: 14px;
        }
        
        .region-popup ul {
            margin: 5px 0 10px 20px;
            font-size: 12px;
            color: #555;
            line-height: 1.6;
        }
        
        .region-popup li {
            margin: 4px 0;
        }
        
        .leaflet-popup-content {
            min-width: 200px;
        }
        
        .custom-marker {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .custom-marker:hover {
            transform: scale(1.3);
        }
        
        .info-box {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            font-size: 13px;
            max-width: 280px;
            border: 2px solid #8b7355;
        }
        
        .info-box h4 {
            margin: 0 0 10px 0;
            color: #5d4037;
            font-size: 15px;
        }
        
        /* Loading screen */
        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #f5f5dc;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            flex-direction: column;
        }
        
        #loading h2 {
            color: #5d4037;
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        #loading p {
            color: #8b7355;
            font-size: 14px;
        }
        
        .spinner {
            border: 4px solid #ddd;
            border-top: 4px solid #8b7355;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading">
        <div class="spinner"></div>
        <h2>Atlas DialectolÃ³gico de Tesalia</h2>
        <p>Cargando mapa interactivo...</p>
    </div>
    
    <div id="map"></div>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Ocultar pantalla de carga cuando el mapa estÃ© listo
        window.addEventListener('load', function() {
            setTimeout(function() {
                document.getElementById('loading').style.display = 'none';
            }, 800);
        });
        
        // Inicializar el mapa centrado en Tesalia
        const map = L.map('map', {
            center: [39.6, 22.1],
            zoom: 8.5,
            minZoom: 8,
            maxZoom: 13
        });
        
        // Diferentes capas base disponibles
        const baseLayers = {
            'Mapa Limpio (recomendado)': L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                attribution: 'Â© OpenStreetMap contributors Â© CARTO',
                subdomains: 'abcd',
                maxZoom: 19
            }),
            'Mapa Terreno': L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
                attribution: 'Tiles Â© Esri',
                maxZoom: 16
            }),
            'Mapa TopogrÃ¡fico': L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
                attribution: 'Â© OpenStreetMap contributors, Â© OpenTopoMap',
                maxZoom: 17
            }),
            'Mapa EstÃ¡ndar': L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: 'Â© OpenStreetMap contributors',
                maxZoom: 19
            })
        };
        
        // AÃ±adir capa base por defecto (Mapa Limpio)
        baseLayers['Mapa Limpio (recomendado)'].addTo(map);
        
        // Control de capas
        L.control.layers(baseLayers, null, { position: 'topleft' }).addTo(map);
        
        // Colores para las 4 tÃ©tradas + Perrebia
        const colors = {
            'Perrebia': '#9B59B6',          // PÃºrpura
            'PelasgiÃ³tide': '#E74C3C',      // Rojo
            'TesaliÃ³tide': '#3498DB',       // Azul
            'HistiÃ³tide': '#2ECC71',        // Verde
            'FtiÃ³tide': '#F39C12'           // Naranja
        };
        
        // InformaciÃ³n dialectal de cada regiÃ³n
        const dialectInfo = {
            'PelasgiÃ³tide': {
                title: 'PelasgiÃ³tide',
                greek: 'Î ÎµÎ»Î±ÏƒÎ³Î¹á¿¶Ï„Î¹Ï‚',
                description: 'CaracterÃ­sticas dialectales principales:',
                features: [
                    '<strong>PartÃ­cula modal ÎºÎµ e interrogativo indefinido ÎºÎ¹Ï‚:</strong> ÎºÎ¯Î½Î¹ ÎºÎµ Î¸[Îµ]ÃµÎ½ (1433A.2, 450-400 a.C.), ÎºÎ¯Î½Î¹ [ÎºÎµ Î¸ÎµÃµÎ½] (2761B.3, s. V a.C.), ÎºÎ¯Ì£Î½Î¹ ÎºÎµ Î¸[ÎµÃµÎ½] (3545B.1, finales s. V a.C.), ÎºÎ¹Î½Î½Î¯ ÎºÎµ Î¸Îµá¿¶Î½ (556A.6, finales s. IV a.C.)',
                    '<strong>Nominativo plural Î¿á¼±</strong> (tesalio occidental Î¿á¼± / Ï„Î¿Î¯): Î¿á¼± ÏƒÏ…Î³Î³ÎµÎ½Î­ÎµÏ‚, Î¿á¼± Ï€Î±Ï„Î­ÏÎµÏ‚ (556A.2, 4-5, finales s. IV a.C.)',
                    '<strong>Genitivo temÃ¡tico en -Î¿Î¹(Î¿):</strong> Ï„Î¿á¿– á¼±Î±ÏÎ¿á¿–Î¿ Ï„Î¿á¿– á¼Î¼Ï€Î­Î´Î¿Ì£Î¹Ì£ (1465A.1, finales s. V a.C.), Ï„Î¿á¿– ÎºÎ±Ï„{Îµ}Î¹Î³Î½ÎµÎ¯Ï„Î¿Î¹Î¿ y Î³Î¬Î¼Î¿Î¹Î¿ (3113A.8, 10, principios s. IV a.C.), Ï€á½²Ï Ï„Î¿á¿– á¼€ÏÏÏ‰ÏƒÏ„ÎµÌ„ÌÎ¼Î±Ï„Î¿Ï‚ (556A.3, finales s. IV a.C.), Ï€á½²Ï Ï„Î¿â€¹á¿–â€º [á¼€Ï]Î³ÏÏÏÎ¿Î¹ (LOD 8B.1-2, finales s. III - principios s. II a.C.)',
                    '<strong>Î±Î¹ > ÎµÎ¹ en terminaciones verbales:</strong> infinitivo á½€ÏÏÎ¾Î¾ÎµÎ¹Î½ (= Ã¡tico á½€ÏÏÎ¾Î±Î¹) (159A.2, finales s. V - principios s. IV a.C.), posiblemente subjuntivo presente medio 1Âª sg. á¼„Î³Î¿Ì„Î¼ÎµÎ¹ (= Ã¡tico á¼„Î³Ï‰Î¼Î±Î¹) (LOD 34, ca. 400 a.C.)'
                ]
            },
            'TesaliÃ³tide': {
                title: 'TesaliÃ³tide',
                greek: 'Î˜ÎµÏƒÏƒÎ±Î»Î¹á¿¶Ï„Î¹Ï‚',
                description: 'CaracterÃ­sticas dialectales principales:',
                features: [
                    '<strong>PartÃ­cula modal ÎºÎµ e interrogativo indefinido Ï„Î¹Ï‚:</strong> Ï„Î¯Î½Î¹ ÎºÎµ Î¸Îµá¿¶[Î½] (18Î’.1, s. V-IV a.C.), Ï„Î¯Î½Î± ÎºÎµ Î¸Îµá¿¶Î½ (992A.2, 350-300 a.C.), Ï„Î¯Î½Î½Î¹ ÎºÎµ Î¸ÎµÌ£[Î¿á¿¦Î½] (1134A.2, 400-350 a.C.), Ï€Î¿Í‚Ï‚ ÎºÎµ á¼Îº ÎœÎµÎ»Î¹Ï„ÎµÎ¯Î±Ï‚ ÏƒÏ‰Î¸á¿†, Ï„Î¯Î½Î¹ Î¸Îµá¿¶Î½ (2024A.3, 4, 400-350 a.C.)',
                    '<strong>Genitivo temÃ¡tico en -Î¿Ï…:</strong> Î ÏÎ¿Î¾Î­Î½Î¿Ï… (2024A.1-2, 400-350 a.C.)'
                ]
            },
            'HistiÃ³tide': {
                title: 'HistiÃ³tide',
                greek: 'á¼¹ÏƒÏ„Î¹Î±Î¹á¿¶Ï„Î¹Ï‚',
                description: 'CaracterÃ­sticas dialectales principales:',
                features: [
                    '<strong>PartÃ­cula modal ÎºÎ± e interrogativo indefinido Ï„Î¹Ï‚:</strong> Î±á¼´ ÎºÎ± Î¼á½° á¼”Ï‡Î¿Ì„ (17B, s. V-IV a.C.), [Ï„Î¯]Î½Î¹ ÎºÎ± Î¸ÎµÎ¿á¿¦Î½ (3687A, principios s. IV a.C.), Ï€ÏÎ¬ÏƒÏƒÎ¿Î¹ ÎºÎ± (217Î‘.4, Histiaeotis?, mediados s. IV a.C.), Î±á¼´ ÎºÎ± Î´Î¹Î´Î¿á¿–Î½ (191A.3, mediados s. IV a.C.)',
                    '<strong>Negativo Î¼á¾±Ì por Î¼Î®:</strong> Î¼á½° Ï€ÏÎ¬Î¾Ì£Î±Î¹ (1988B, s. IV a.C.). Menos seguro: Î±á¼´ ÎºÎ± Î¼á½° á¼”Ï‡Î¿Ì„ (17B, s. V-IV a.C.), Î±á¼° Î´á½² Î¼á½° [---], 2985A (finales s. V - principios s. IV a.C.), Î±á¼´Ï„Îµ Î¼Î¬ (3205A.1, 400-350 a.C.)',
                    '<strong>Cambio /o/ > /e/ tras dentales y palatales en sÃ­labas finales</strong> (el shibbÃ³let mÃ¡s distintivo de HistiÃ³tide): á¼€Ï€ÎµÎ´ÎµÎ¯Î¾Î±Ï„Îµ por á¼€Ï€ÎµÎ´ÎµÎ¯Î¾Î±Ï„Î¿ (< *-snÌ¥to; Ã¡tico á¼€Ï€ÎµÎ´ÎµÎ¯Î¾Î±Î½Ï„Î¿) (1351A.3, 500-450 a.C.), á½•Î´Î±Ï„Ì£ÎµÏ‚ por á½•Î´Î±Ï„Î¿Ï‚ (3007A.1, finales s. V a.C.), Î”Î¿Ï…Î´Ï‰Î½Î±Î¯ÎµÎ¹ por Î”Ï‰Î´Ï‰Î½Î±Î¯Î¿Î¹ (2204A.2, finales s. V a.C.), Ï€Î±â€¹Î¹â€ºÎ´Î¯Îµâ€¹Î¹â€ºÎ½ por Ï€Î±Î¹Î´Î¯Î¿Î¹Î½ (2015B.2, 400-350 a.C.), ÏƒÏÎ¼Ì£Ï†Ì£Î¿ÏÎµÎ½ por ÏƒÏÎ¼Ï†Î¿ÏÎ¿Î½ (191A.1, mediados s. IV a.C.), Î´Ï…Î½Î±Ï„Î­Î½ por Î´Ï…Î½Î±Ï„ÏŒÎ½ (3042, mediados s. IV a.C.)',
                    '<strong>Psilosis de á½¥ÏƒÏ€ÎµÏ:</strong> Åá¿ÏƒÏ€ÎµÏ Ï€ÏÃµÏ„Î±Ï‚ (1351A.2-3, 500-450 a.C.). TambiÃ©n nominativo del artÃ­culo Î¿á¼± en 556A.2, 4-5 (finales s. IV a.C.), aunque h- se ignora en el alfabeto Ã¡tico adaptado',
                    '<strong>Optativo 3Âª pl. Î´Î¹Î´Î¿á¿–Î½</strong> (= Ã¡tico Î´Î¹Î´Î¿á¿–ÎµÎ½) (191A, mediados s. IV a.C.) con terminaciÃ³n -Î¿Î¹Î½ tÃ­pica de dialectos del noroeste. Cf. tambiÃ©n Î´Î¿á¿–Î½ por Î´Î¿á¿–ÎµÎ½ en SEG 36, 548.7 (MatrÃ³polis, finales s. III a.C.)',
                    '<strong>Infinitivo aoristo en -ÏƒÎ±Î¹</strong> (Ï€ÏÎ¬Î¾Ì£Î±Î¹, 1988B, s. IV a.C.) frente a -ÏƒÎµÎ¹Î½ en Larisa'
                ]
            }
        };
        
        // PolÃ­gonos de las regiones
        const regions = {
            'Perrebia': [
                [40.4, 21.4],    [40.4, 21.8],    [40.4, 22.4],    [40.1, 22.6],
                [39.85, 22.4],   [39.85, 22.0],   [39.85, 21.7],   [40.0, 21.4],
                [40.4, 21.4]
            ],
            'PelasgiÃ³tide': [
                [39.85, 22.0],   [39.85, 22.4],   [40.1, 22.6],    [39.8, 23.05],
                [39.55, 23.05],  [39.35, 23.05],  [39.32, 22.85],  [39.32, 22.65],
                [39.35, 22.5],   [39.4, 22.35],   [39.48, 22.2],   [39.55, 22.05],
                [39.65, 21.95],  [39.85, 22.0]
            ],
            'HistiÃ³tide': [
                [40.0, 21.25],   [40.0, 21.4],    [39.85, 21.7],   [39.85, 22.0],
                [39.65, 21.95],  [39.55, 22.0],   [39.48, 22.05],  [39.4, 21.95],
                [39.3, 21.8],    [39.25, 21.65],  [39.28, 21.45],  [39.35, 21.3],
                [39.5, 21.25],   [39.7, 21.25],   [40.0, 21.25]
            ],
            'TesaliÃ³tide': [
                [39.65, 21.95],  [39.55, 22.05],  [39.48, 22.2],   [39.4, 22.35],
                [39.35, 22.45],  [39.28, 22.42],  [39.2, 22.35],   [39.1, 22.25],
                [39.05, 22.1],   [39.1, 21.95],   [39.18, 21.8],   [39.25, 21.65],
                [39.3, 21.8],    [39.4, 21.95],   [39.48, 22.05],  [39.55, 22.0],
                [39.65, 21.95]
            ],
            'FtiÃ³tide': [
                [39.35, 22.45],  [39.35, 22.5],   [39.32, 22.65],  [39.32, 22.85],
                [39.35, 23.05],  [39.2, 23.05],   [39.05, 23.05],  [38.85, 23.05],
                [38.7, 22.95],   [38.7, 22.7],    [38.7, 22.4],    [38.75, 22.2],
                [38.85, 22.0],   [38.95, 21.88],  [39.05, 22.1],   [39.1, 22.25],
                [39.2, 22.35],   [39.28, 22.42],  [39.35, 22.45]
            ]
        };
        
        // Dibujar las regiones con polÃ­gonos
        Object.keys(regions).forEach(regionName => {
            const polygon = L.polygon(regions[regionName], {
                color: colors[regionName],
                fillColor: colors[regionName],
                fillOpacity: 0.25,
                weight: 3,
                opacity: 0.8,
                smoothFactor: 1.5
            }).addTo(map);
            
            // Popup con informaciÃ³n dialectal solo para las 3 tÃ©tradas
            if (dialectInfo[regionName]) {
                const info = dialectInfo[regionName];
                polygon.bindPopup(`
                    <div class="region-popup">
                        <h3 style="color: ${colors[regionName]};">${info.title}</h3>
                        <p style="font-style: italic; color: #888; font-size: 13px;">${info.greek}</p>
                        <p style="margin: 10px 0 5px 0;">${info.description}</p>
                        <ul>
                            ${info.features.map(feature => `<li>${feature}</li>`).join('')}
                        </ul>
                    </div>
                `);
            } else {
                // Para Perrebia y FtiÃ³tide, popup simple con solo el nombre
                polygon.bindPopup(`
                    <div style="text-align: center;">
                        <h3 style="color: ${colors[regionName]}; margin: 0;">${regionName}</h3>
                    </div>
                `);
            }
            
            // Tooltip al pasar el ratÃ³n
            polygon.bindTooltip(regionName, {
                permanent: false,
                direction: 'center',
                className: 'region-tooltip',
                opacity: 0.9
            });
        });
        
        // Base de datos de ciudades
        const cities = [
            { 
                name: 'Farkadon', 
                nameGreek: 'Î¦Î±ÏÎºÎ±Î´ÏÎ½',
                lat: 39.583, 
                lng: 22.067, 
                region: 'PelasgiÃ³tide', 
                info: 'Ciudad de PelasgiÃ³tide situada en la llanura tesalia, a medio camino entre TrÃ­kala y Larisa. La antigua ciudad estaba cerca de Klokoto. Capturada por Filipo II de Macedonia en 357 a.C.',
                importance: 'major'
            },
            { 
                name: 'Tetonio', 
                nameGreek: 'Î˜Î·Ï„ÏÎ½Î¹Î¿Î½',
                lat: 39.3203, 
                lng: 22.2072, 
                region: 'TesaliÃ³tide', 
                info: 'Ciudad de TesaliÃ³tide mencionada en una inscripciÃ³n del 450-425 a.C., la mÃ¡s antigua donde se menciona el tÃ­tulo de tagos de Tesalia. Cerca de Gefiria moderna.',
                importance: 'minor'
            },
            { 
                name: 'TrÃ­cala', 
                nameGreek: 'Î¤ÏÎ¯ÎºÎºÎ± / Î¤ÏÎ¯ÎºÎºÎ·',
                lat: 39.5549, 
                lng: 21.7684, 
                region: 'HistiÃ³tide', 
                info: 'Ciudad principal de HistiÃ³tide. Centro del culto a Asclepio. Mencionada en la IlÃ­ada como patria de dos hijos de Asclepio. Moderna TrÃ­kala.',
                importance: 'capital'
            },
            { 
                name: 'Elimeia', 
                nameGreek: 'á¼˜Î»Î¯Î¼ÎµÎ¹Î±',
                lat: 40.22, 
                lng: 21.84, 
                region: 'Perrebia', 
                info: 'RegiÃ³n de Perrebia fronteriza con Macedonia, en las montaÃ±as del Pindo. Regada por el rÃ­o Haliakmon. Capital en Aiani.',
                importance: 'minor'
            },
            { 
                name: 'Feras', 
                nameGreek: 'Î¦ÎµÏÎ±Î¯',
                lat: 39.379, 
                lng: 22.7539, 
                region: 'PelasgiÃ³tide', 
                info: 'Ciudad importante cerca del lago Bebeida. Hogar de los tiranos JasÃ³n, Alejandro y LicofrÃ³n. En la mitologÃ­a, patria del rey Admeto. Actual Velestino.',
                importance: 'major'
            },
            { 
                name: 'Egino', 
                nameGreek: 'á¼˜Ï‡á¿–Î½Î¿Ï‚',
                lat: 38.8958, 
                lng: 22.7254, 
                region: 'FtiÃ³tide', 
                info: 'Ciudad de FtiÃ³tide o Malis situada en el golfo MalÃ­aco, entre Lamia y Larisa Cremaste. Filipo II la tomÃ³ de los tebanos en 342 a.C. Moderna Achinos.',
                importance: 'major'
            },
            { 
                name: 'Mondaia', 
                nameGreek: 'ÎœÎ¿Î½Î´Î±Î¯Î±',
                lat: 39.91, 
                lng: 22.20, 
                region: 'Perrebia', 
                info: 'Ciudad de Perrebia cerca del monte Olimpo y valle del Tempe. Aparece en inscripciones del 375-350 a.C. ofreciendo dedicatoria a Apolo Pitio. Cerca de Loutro Elassonos.',
                importance: 'minor'
            }
        ];
        
        // FunciÃ³n para crear iconos personalizados
        const createIcon = (color, importance) => {
            const sizes = {
                'capital': 14,
                'major': 12,
                'minor': 10
            };
            const size = sizes[importance] || 10;
            
            return L.divIcon({
                className: 'custom-marker',
                html: `<div style="
                    background-color: ${color}; 
                    width: ${size}px; 
                    height: ${size}px; 
                    border-radius: 50%; 
                    border: 2px solid #333;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
                "></div>`,
                iconSize: [size + 4, size + 4],
                iconAnchor: [(size + 4) / 2, (size + 4) / 2]
            });
        };
        
        // AÃ±adir marcadores de ciudades
        cities.forEach(city => {
            const marker = L.marker([city.lat, city.lng], {
                icon: createIcon(colors[city.region], city.importance)
            }).addTo(map);
            
            marker.bindPopup(`
                <div class="city-popup">
                    <h3>${city.name}</h3>
                    <p style="font-style: italic; color: #888; font-size: 12px;">${city.nameGreek}</p>
                    <p><strong>RegiÃ³n:</strong> ${city.region}</p>
                    <p style="margin-top: 8px;">${city.info}</p>
                </div>
            `);
            
            marker.bindTooltip(city.name, {
                permanent: false,
                direction: 'top',
                offset: [0, -10],
                className: 'city-label',
                opacity: 0.9
            });
        });
        
        // AÃ±adir leyenda
        const legend = L.control({ position: 'topright' });
        
        legend.onAdd = function(map) {
            const div = L.DomUtil.create('div', 'legend');
            div.innerHTML = '<h4>Regiones de Tesalia</h4>';
            
            div.innerHTML += `
                <div class="legend-item">
                    <div class="legend-color" style="background-color: ${colors['Perrebia']}"></div>
                    <span class="legend-text">Perrebia</span>
                </div>
                <hr style="margin: 5px 0; border-color: #ccc;">
                <p style="font-size: 11px; color: #666; margin: 5px 0; text-align: center;">Las Cuatro TÃ©tradas:</p>
            `;
            
            ['PelasgiÃ³tide', 'TesaliÃ³tide', 'HistiÃ³tide', 'FtiÃ³tide'].forEach(region => {
                div.innerHTML += `
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: ${colors[region]}"></div>
                        <span class="legend-text">${region}</span>
                    </div>
                `;
            });
            
            div.innerHTML += `
                <hr style="margin: 10px 0; border-color: #8b7355;">
                <p style="font-size: 11px; color: #666; text-align: center; margin: 8px 0 0 0;">
                    Tesalia Antigua (s. V-IV a.C.)<br>
                    Î ÎµÏÏÎ±Î¹Î²Î¯Î± + Î¤ÎµÏ„ÏÎ¬Î´ÎµÏ‚ Î˜ÎµÏƒÏƒÎ±Î»Î¯Î±Ï‚
                </p>
            `;
            
            return div;
        };
        
        legend.addTo(map);
        
        // AÃ±adir cuadro informativo
        const info = L.control({ position: 'bottomleft' });
        
        info.onAdd = function(map) {
            const div = L.DomUtil.create('div', 'info-box');
            div.innerHTML = `
                <h4>Dialectos de Tesalia</h4>
                <p style="margin: 8px 0; font-size: 13px; line-height: 1.5;">
                    <strong>Haz clic en una regiÃ³n para ver sus caracterÃ­sticas dialectales principales.</strong>
                </p>
                <p style="margin-top: 10px; font-size: 11px; color: #888;">
                    Pasa el ratÃ³n sobre las ciudades o regiones para ver sus nombres.<br>
                    Usa el selector arriba-izquierda para cambiar el estilo del mapa.
                </p>
            `;
            return div;
        };
        
        info.addTo(map);
    </script>
</body>
</html>
